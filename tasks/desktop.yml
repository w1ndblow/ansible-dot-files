---
- name: "add vscode source"
  block:
    - name: apt-key > add an Apt signing microsoft key
      become: True
      ansible.builtin.apt_key:
        url: https://packages.microsoft.com/keys/microsoft.asc
        keyring: /etc/apt/keyrings/packages.microsoft.gpg
        state: present

    - name: apt-repo > microsoft apt source repo
      become: True  
      ansible.builtin.apt_repository:
        repo: >
          deb [arch=amd64 signed-by=/etc/apt/keyrings/packages.microsoft.gpg]
          https://packages.microsoft.com/repos/code stable main
        filename: vscode
        state: present

- name: "apt-get> install dependences"
  become: True
  apt:
    update_cache: True
    name: "{{ item }}"
    state: present
  with_items: "{{ packages.UbuntuDesktop }}"
  when: ansible_os_family=="Debian"
